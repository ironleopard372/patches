From 61ade14922a70ba59d3bfef27b145a997a855fc5 Mon Sep 17 00:00:00 2001
From: Nathan Chancellor <natechancellor@gmail.com>
Date: Mon, 3 Jun 2019 10:48:04 -0700
Subject: [PATCH 5/5] powerpc: Kconfig: Don't enable HAVE_FUNCTION_TRACER on
 ppc64 big endian

Broken with clang.

Link: https://github.com/ClangBuiltLinux/linux/issues/35#issuecomment-450854189
Signed-off-by: Nathan Chancellor <natechancellor@gmail.com>
---
 arch/powerpc/Kconfig | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/arch/powerpc/Kconfig b/arch/powerpc/Kconfig
index e437aa3e78b4..6a0cc31c3b5d 100644
--- a/arch/powerpc/Kconfig
+++ b/arch/powerpc/Kconfig
@@ -188,7 +188,7 @@ config PPC
 	select HAVE_FTRACE_MCOUNT_RECORD
 	select HAVE_FUNCTION_ERROR_INJECTION
 	select HAVE_FUNCTION_GRAPH_TRACER
-	select HAVE_FUNCTION_TRACER
+	select HAVE_FUNCTION_TRACER		if !(CC_IS_CLANG && PPC64 && CPU_BIG_ENDIAN)
 	select HAVE_GCC_PLUGINS			if GCC_VERSION >= 50200   # plugin support on gcc <= 5.1 is buggy on PPC
 	select HAVE_GENERIC_GUP
 	select HAVE_HW_BREAKPOINT		if PERF_EVENTS && (PPC_BOOK3S || PPC_8xx)
-- 
2.22.0

