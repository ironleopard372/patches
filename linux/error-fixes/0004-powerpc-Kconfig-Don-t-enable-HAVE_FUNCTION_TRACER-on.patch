From f92212f8e69ce55f91582d31a57c1cd58244dcb4 Mon Sep 17 00:00:00 2001
From: Nathan Chancellor <natechancellor@gmail.com>
Date: Mon, 3 Jun 2019 10:48:04 -0700
Subject: [PATCH 4/4] powerpc: Kconfig: Don't enable HAVE_FUNCTION_TRACER on
 ppc64 big endian

Broken with clang.

Link: https://github.com/ClangBuiltLinux/linux/issues/35#issuecomment-450854189
Signed-off-by: Nathan Chancellor <natechancellor@gmail.com>
---
 arch/powerpc/Kconfig | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/arch/powerpc/Kconfig b/arch/powerpc/Kconfig
index 55192e03bffd..6a0a903667ca 100644
--- a/arch/powerpc/Kconfig
+++ b/arch/powerpc/Kconfig
@@ -191,7 +191,7 @@ config PPC
 	select HAVE_FTRACE_MCOUNT_RECORD
 	select HAVE_FUNCTION_ERROR_INJECTION
 	select HAVE_FUNCTION_GRAPH_TRACER
-	select HAVE_FUNCTION_TRACER
+	select HAVE_FUNCTION_TRACER		if !(CC_IS_CLANG && PPC64 && CPU_BIG_ENDIAN)
 	select HAVE_GCC_PLUGINS			if GCC_VERSION >= 50200   # plugin support on gcc <= 5.1 is buggy on PPC
 	select HAVE_HW_BREAKPOINT		if PERF_EVENTS && (PPC_BOOK3S || PPC_8xx)
 	select HAVE_IDE
-- 
2.22.0

