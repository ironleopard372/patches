From 1229ec972b264690f1011bed230dc5844fa4ed00 Mon Sep 17 00:00:00 2001
From: Nathan Chancellor <natechancellor@gmail.com>
Date: Sun, 30 Sep 2018 18:32:55 -0700
Subject: [PATCH 4/8] DO-NOT-UPSTREAM: Disable CPU_BIG_ENDIAN with Clang

Link: https://github.com/ClangBuiltLinux/linux/issues/36
Signed-off-by: Nathan Chancellor <natechancellor@gmail.com>
---
 arch/arm/mm/Kconfig | 2 +-
 arch/arm64/Kconfig  | 1 +
 2 files changed, 2 insertions(+), 1 deletion(-)

diff --git a/arch/arm/mm/Kconfig b/arch/arm/mm/Kconfig
index b169e580bf82..63fdc70552aa 100644
--- a/arch/arm/mm/Kconfig
+++ b/arch/arm/mm/Kconfig
@@ -741,7 +741,7 @@ config SWP_EMULATE
 
 config CPU_BIG_ENDIAN
 	bool "Build big-endian kernel"
-	depends on ARCH_SUPPORTS_BIG_ENDIAN
+	depends on ARCH_SUPPORTS_BIG_ENDIAN && !CC_IS_CLANG
 	help
 	  Say Y if you plan on running a kernel in big-endian mode.
 	  Note that your board must be properly built and your board
diff --git a/arch/arm64/Kconfig b/arch/arm64/Kconfig
index 1b1a0e95c751..36480f96044e 100644
--- a/arch/arm64/Kconfig
+++ b/arch/arm64/Kconfig
@@ -698,6 +698,7 @@ config ARM64_PA_BITS
 
 config CPU_BIG_ENDIAN
        bool "Build big-endian kernel"
+       depends on !CC_IS_CLANG
        help
          Say Y if you plan on running a kernel in big-endian mode.
 
-- 
2.19.0

