From 10d4a7d4c257a9c8088555e14e7f8bb6680d4e52 Mon Sep 17 00:00:00 2001
From: Nathan Chancellor <natechancellor@gmail.com>
Date: Mon, 4 Mar 2019 19:18:52 -0700
Subject: [PATCH 12/12] DO-NOT-UPSTREAM: spi: Disable -Wshift-count-overflow
 for spi-sh-msiof.o

GitHub issue: https://github.com/ClangBuiltLinux/linux/issues/92
LLVM bug: https://bugs.llvm.org/show_bug.cgi?id=38789
Signed-off-by: Nathan Chancellor <natechancellor@gmail.com>
---
 drivers/spi/Makefile | 1 +
 1 file changed, 1 insertion(+)

diff --git a/drivers/spi/Makefile b/drivers/spi/Makefile
index d8fc03c9faa2..87c934d75127 100644
--- a/drivers/spi/Makefile
+++ b/drivers/spi/Makefile
@@ -94,6 +94,7 @@ obj-$(CONFIG_SPI_SC18IS602)		+= spi-sc18is602.o
 obj-$(CONFIG_SPI_SH)			+= spi-sh.o
 obj-$(CONFIG_SPI_SH_HSPI)		+= spi-sh-hspi.o
 obj-$(CONFIG_SPI_SH_MSIOF)		+= spi-sh-msiof.o
+CFLAGS_spi-sh-msiof.o			+= $(call cc-disable-warning, shift-count-overflow)
 obj-$(CONFIG_SPI_SH_SCI)		+= spi-sh-sci.o
 obj-$(CONFIG_SPI_SIFIVE)		+= spi-sifive.o
 obj-$(CONFIG_SPI_SIRF)		+= spi-sirf.o
-- 
2.21.0

