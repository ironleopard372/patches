From 25cf8702703876684c04ff443f975c7e38664a9d Mon Sep 17 00:00:00 2001
From: Nathan Chancellor <natechancellor@gmail.com>
Date: Wed, 27 May 2020 00:33:23 -0700
Subject: [PATCH 29/30] net: ethernet: mtk-star-emac: Avoid using new_dma_addr
 uninitialized

Link: https://lore.kernel.org/lkml/20200527073150.GA3384158@ubuntu-s3-xlarge-x86/
Signed-off-by: Nathan Chancellor <natechancellor@gmail.com>
---
 drivers/net/ethernet/mediatek/mtk_star_emac.c | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

diff --git a/drivers/net/ethernet/mediatek/mtk_star_emac.c b/drivers/net/ethernet/mediatek/mtk_star_emac.c
index b74349cede28..c2ae5551ad35 100644
--- a/drivers/net/ethernet/mediatek/mtk_star_emac.c
+++ b/drivers/net/ethernet/mediatek/mtk_star_emac.c
@@ -1305,7 +1305,7 @@ static int mtk_star_receive_packet(struct mtk_star_priv *priv)
 		dev_kfree_skb(new_skb);
 		new_skb = curr_skb;
 		netdev_err(ndev, "DMA mapping error of RX descriptor\n");
-		goto push_new_skb;
+		goto push_new_skb_dma;
 	}
 
 	/* We can't fail anymore at this point: it's safe to unmap the skb. */
@@ -1317,8 +1317,9 @@ static int mtk_star_receive_packet(struct mtk_star_priv *priv)
 	desc_data.skb->dev = ndev;
 	netif_receive_skb(desc_data.skb);
 
-push_new_skb:
+push_new_skb_dma:
 	desc_data.dma_addr = new_dma_addr;
+push_new_skb:
 	desc_data.len = skb_tailroom(new_skb);
 	desc_data.skb = new_skb;
 
-- 
2.27.0.rc0

