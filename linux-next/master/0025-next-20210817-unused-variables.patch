From f52852f2863af7dbe1c53ed7cbdae9e92af8eb90 Mon Sep 17 00:00:00 2001
From: Nathan Chancellor <nathan@kernel.org>
Date: Tue, 17 Aug 2021 13:52:58 -0700
Subject: [PATCH 25/31] next-20210817 unused variables

Signed-off-by: Nathan Chancellor <nathan@kernel.org>
---
 drivers/cpufreq/vexpress-spc-cpufreq.c   | 1 -
 drivers/gpu/drm/amd/amdkfd/kfd_chardev.c | 2 ++
 2 files changed, 2 insertions(+), 1 deletion(-)

diff --git a/drivers/cpufreq/vexpress-spc-cpufreq.c b/drivers/cpufreq/vexpress-spc-cpufreq.c
index 284b6bd040b1..d295f405c4bb 100644
--- a/drivers/cpufreq/vexpress-spc-cpufreq.c
+++ b/drivers/cpufreq/vexpress-spc-cpufreq.c
@@ -451,7 +451,6 @@ static int ve_spc_cpufreq_init(struct cpufreq_policy *policy)
 static int ve_spc_cpufreq_exit(struct cpufreq_policy *policy)
 {
 	struct device *cpu_dev;
-	int cur_cluster = cpu_to_cluster(policy->cpu);
 
 	cpu_dev = get_cpu_device(policy->cpu);
 	if (!cpu_dev) {
diff --git a/drivers/gpu/drm/amd/amdkfd/kfd_chardev.c b/drivers/gpu/drm/amd/amdkfd/kfd_chardev.c
index 3177c4a0e753..8ca5b37a9014 100644
--- a/drivers/gpu/drm/amd/amdkfd/kfd_chardev.c
+++ b/drivers/gpu/drm/amd/amdkfd/kfd_chardev.c
@@ -1251,7 +1251,9 @@ static int kfd_ioctl_alloc_memory_of_gpu(struct file *filep,
 	struct kfd_process_device *pdd;
 	void *mem;
 	struct kfd_dev *dev;
+#if IS_ENABLED(CONFIG_HSA_AMD_SVM)
 	struct svm_range_list *svms = &p->svms;
+#endif
 	int idr_handle;
 	long err;
 	uint64_t offset = args->mmap_offset;
-- 
2.33.0

