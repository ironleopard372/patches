diff --git a/include/linux/compiler-clang.h b/include/linux/compiler-clang.h
index 441212d12c2d..5eb26b7bf930 100644
--- a/include/linux/compiler-clang.h
+++ b/include/linux/compiler-clang.h
@@ -11,13 +11,10 @@
 #define uninitialized_var(x) x = *(&(x))
 #endif
 
-/*
-* GCC does not warn about unused static inline functions for
-* -Wunused-function.  This turns out to avoid the need for complex #ifdef
-* directives.  Suppress the warning in clang as well.
-*/
-#undef inline
-#define inline inline __attribute__((unused)) notrace
+/* same as gcc, this was present in clang-2.6 so we can assume it works
+ * with any version that can compile the kernel
+ */
+#define __UNIQUE_ID(prefix) __PASTE(__PASTE(__UNIQUE_ID_, prefix), __COUNTER__)
 
 /*
  * Clang supports FORTIFY_SOURCE; this needs to override compiler-gcc.h turning it off
